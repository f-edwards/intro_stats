---
title: "Untitled"
author: "Frank Edwards"
date: "10/9/2019"
output: html_document
---
## inline code for fancy papers

```{r}
summary(cars)
```

To put a piece of R output into your code, you just do this `r mean(cars$speed)`

Keep in mind that this should only display atomics, or single elements of type logical, numeric, character, etc. 

## ROUNDING

```{r}
## draw some ugly random numbers
sample<-rnorm(10, mean = 10, sd = 10)
```

this makes for unpleasant papers `r mean(sample)`. Instead, let's round to two significant digits: `r round(mean(sample),2)`. 

```{r message = FALSE, warning = FALSE}
library(tidyverse)
data(iris)

iris_summary<-iris %>% 
  group_by(Species) %>% 
  summarise(Petal.Length.mn = mean(Petal.Length))
```

The petal length for `r iris_summary$Species[1]` is `r round(iris_summary$Petal.Length.mn[1],2)`. 

```{r}
library(pander)

iris_summary

pander(iris_summary %>% 
         rename(`Mean petal length` = Petal.Length.mn))

pander(summary(iris))
```

## JOINS

```{r}
polls<-read_csv("./data/polls2016.csv")
results<-read_csv("./data/1976-2016-president.csv")
```

JOIN Clinton's average polling by state onto each state observation. Let's see how her polling changed as the election approached within states.

```{r}
polls <- polls %>% 
  filter(population == "Likely Voters")

polls_st<-polls %>% 
  group_by(state) %>% 
  summarise(Clinton_mean = mean(Clinton))

polls_join<-polls %>% 
  left_join(polls_st)
```

ONE APPLICATION: Summarize a data frame, join the summary back on to the original.

```{r}
ggplot(polls_join,
       aes(x = -1 * days_to_election,
           y = Clinton - Clinton_mean)) + 
  geom_line() +
  facet_wrap(~state)
```

ANOTHER APPLICATION: JOIN TWO DATA FRAMES TOGETHER

```{r}
stocks <- tibble(
  time = as.Date('2009-01-01') + 0:9,
  X = rnorm(10, 0, 1),
  Y = rnorm(10, 0, 2),
  Z = rnorm(10, 0, 4)
)

stocks_long<-stocks %>%
  gather(key = "stock", 
         value = "price", 
         -time)

stocks_wide<-stocks_long %>% 
  spread(key = "stock",
         value = "price")

```

